'use strict';$(document).ready(function(){var a=$('#form_variant');a.on('submit',function(b){b.preventDefault(),document.querySelector('.calculation_container').classList.remove('remove_content');var c=this.elements[1].value,d;d=10>c?parseFloat('1.0'+c):parseFloat('1.'+c);var f=$('#form_variant [name="csrfmiddlewaretoken"]').val(),g=a.attr('action'),h={};h.csrfmiddlewaretoken=f,h.variant=c,h.coef=d,$.ajax({url:g,type:'POST',data:h,cache:!0,success:function(j){function k(){E.toggleClass('show_menu'),F.toggleClass('transparent-content')}function l(...oa){var pa=[];for(var qa of oa){let ra=$(qa);pa.push(ra)}return pa}function m(oa,pa){var qa=0;for(var ra of pa){for(var sa=0;sa<oa.length;sa++)oa[sa][qa].innerHTML=ra[sa];qa++}}function n(oa,pa){var qa='(';for(var ra of r){var sa=ra[oa];qa+=0<sa?' + '+sa:sa+' '}return qa+=') / 5 = '+pa}function o(oa){var pa,qa,ra=[];'left'==oa?(pa=1,qa=-3):(pa=2,qa=3);for(var sa=0;sa<w.length;sa++)ra.push(qa+' * '+w[sa][0]+' + '+aa[sa]+' = '+w[sa][pa]);return ra}function q(oa,pa,qa,ra,sa,ta,ua,va,wa,xa){var ya=$(oa),za=$(pa),Aa=[],Ba=[];for(var Ca of r)Aa.push(Ca[qa]),Ba.push(Ca[ra]);for(var Da=0;Da<ya.length;Da++)ya[Da].innerHTML=Aa[Da],za[Da].innerHTML=Ba[Da];var Ea=$(ta),Fa=$(ua),Ga=$(va),Ha=[Ea,Fa,Ga],Ia=y[sa],Ja=0;for(var Ka of['xy','x_square','y_square']){for(var La=0;La<Ia[Ka].length;La++)Ha[Ja][La].innerHTML=Ia[Ka][La];Ja++}for(var Ma=$(wa),Na=$(xa),Oa=Ia.sum_val,Pa=Ia.avrg_val,Qa=0;Qa<Oa.length;Qa++)Ma[Qa].innerHTML=Oa[Qa],Na[Qa].innerHTML=Pa[Qa]}var r=j.entry_data_table,s=j.free_risk_cp,t=j.average_rate_for_cp,u=j.average_rate_income,v=j.average_rate_portfolio,w=j.border_sigma,y=j.corelation_data,z=j.betta_coeficients,A=j.market_list,B=j.avrg_market.toFixed(2),C=j.required_profitability_for_portf,D=$('#burger'),E=$('#menu'),F=$('.visib-cont'),G=$('.calculation_container'),H=document.getElementById('phone-nav-menu');if('flex'==getComputedStyle(H).display){var I=document.documentElement.clientHeight;document.addEventListener('scroll',function(){window.pageYOffset>I?H.classList.add('show_content_menu'):H.classList.remove('show_content_menu')})}G.addClass('show_content'),$('error').removeClass('show_error'),D.addClass('showing_animation'),D.click(k),F.click(k),E.click(k);var J=$('#back-to-top');J.click(function(){b.preventDefault(),window.scrollTo(0,0),J.removeClass('show_arrow')}),window.onscroll=function(){var oa=window.pageYOffset,pa=$(window).height();oa>pa+40?J.addClass('show_arrow'):J.removeClass('show_arrow')};var K=l('.column-cp-a','.column-cp-b','.column-cp-c','.column-market');m(K,r),$('#free-risk-sp')[0].innerHTML=s+'%';var L=l('.aver_rate_inc_a','.aver_rate_inc_b','.aver_rate_inc_c'),M=n(0,t[0]),N=n(1,t[1]),O=n(2,t[2]),P=[M,N,O];$('.average_rate_portf')[0].innerHTML='<span class=\'average\'>K<sub>p</sub></span>: '+v;for(var Q=0;Q<P.length;Q++)L[Q][0].innerHTML=P[Q];var K=l('.col-cp-a','.col-cp-b','.col-cp-c');m(K,r);for(var R=$('.realize_rate_income'),S=0;S<u.length;S++)R[S].innerHTML=u[S];var T=$('.calculation_sigma_example'),U=[];for(var V of r)U.push(V[0]);var W='<span>&radic;</span>(';for(var X of U)W+='('+X+' + '+t[0]+')<sup>2</sup>',X!=U[U.length-1]&&(W+=' + ');W+=')/5-1 = '+w[0][0],T[0].innerHTML=W;for(var Y=$('.calculated_sigma'),S=0;S<Y.length;S++)Y[S].innerHTML=w[S+1][0];var Z=$('.left_border_sigma'),_=$('.right_border_sigma'),aa=t.slice();aa.push(v);for(var ba=o('left'),ca=o('right'),S=0;S<Z.length;S++)Z[S].innerHTML=ba[S],_[S].innerHTML=ca[S];var da=j.upper_bound_for_chart,ea=[];w.filter(oa=>ea.push(oa[0]));var fa=Math.min(...ea),ga=[];for(var ha of ea)ga.push(da*(fa/ha));var ia=new Chartist.Line('.ct-chart-line',{series:[{name:'\u0426\u041F a',className:'cp_a',data:[{x:w[0][1],y:0},{x:aa[0],y:ga[0]},{x:w[0][2],y:0}]},{name:'\u0426\u041F \u0431',className:'cp_b',data:[{x:w[1][1],y:0},{x:aa[1],y:ga[1]},{x:w[1][2],y:0}]},{name:'\u0426\u041F \u0446',className:'cp_c',data:[{x:w[2][1],y:0},{x:aa[2],y:ga[2]},{x:w[2][2],y:0}]},{name:'\u041F\u043E\u0440\u0442\u0444\u0435\u043B\u044C',className:'portfolio',data:[{x:w[3][1],y:0},{x:aa[3],y:ga[3]},{x:w[3][2],y:0}]}]},{showArea:!0,low:0,high:1,fullWidth:!0,axisX:{showGrid:!1,type:Chartist.AutoScaleAxis,onlyInteger:!0,scaleMinSpace:30},axisY:{scaleMinSpace:40},chartPadding:{right:40},plugins:[Chartist.plugins.legend({})]});ia.on('draw',function(oa){('line'===oa.type||'area'===oa.type)&&oa.element.animate({d:{begin:1500*oa.index,dur:1500,from:oa.path.clone().scale(1,0).translate(0,oa.chartRect.height()).stringify(),to:oa.path.clone().stringify(),easing:Chartist.Svg.Easing.easeOutQuint}})}),q('.table-cpa-cpb .cor-cpa','.table-cpa-cpb .cor-cpb',0,1,'cpa_cpb','.table-cpa-cpb .cor-cpa-cpb','.table-cpa-cpb .cor-cpa-square','.table-cpa-cpb .cor-cpb-square','.table-cpa-cpb .sum','.table-cpa-cpb .avrg'),q('.table-cpa-cpc .cor-cpa','.table-cpa-cpc .cor-cpc',0,2,'cpa_cpc','.table-cpa-cpc .cor-cpa-cpc','.table-cpa-cpc .cor-cpa-square','.table-cpa-cpc .cor-cpc-square','.table-cpa-cpc .sum','.table-cpa-cpc .avrg'),q('.table-cpb-cpc .cor-cpb','.table-cpb-cpc .cor-cpc',1,2,'cpb_cpc','.table-cpb-cpc .cor-cpb-cpc','.table-cpb-cpc .cor-cpb-square','.table-cpb-cpc .cor-cpc-square','.table-cpb-cpc .sum','.table-cpb-cpc .avrg');var ja=y.cpa_cpb.avrg_val,ka='('+ja[2]+' - '+ja[0]+' * '+ +ja[1]+') / <span>&radic;</span>( '+ja[3]+' - '+ +ja[0]+' * '+ja[0]+') * ('+ja[4]+' - '+ +ja[1]+' * '+ja[1]+') = '+y.cpa_cpb.correlation;$('.corAB')[0].innerHTML=ka,$('.corAC')[0].innerHTML=y.cpa_cpb.correlation,$('.corBC')[0].innerHTML=y.cpb_cpc.correlation,$('.avrg_income_portfolio')[0].innerHTML='<span class=\'average\'>k<sub>m</sub></span> = ('+A[0]+' + '+A[1]+' + '+A[3]+' + '+ +A[4]+') / 5 ='+B;var la='(('+A[0]+' - '+B+') * ('+r[0][0]+' - '+ja[0]+') +  ('+ +A[1]+' - '+B+') * ('+r[1][0]+' - '+ja[0]+') +  ('+ +A[2]+' - '+B+') * ('+r[2][0]+' - '+ja[0]+') +  ('+ +A[3]+' - '+B+') * ('+r[3][0]+' - '+ja[0]+'))',ma='(( '+A[0]+' - '+B+')<sup>2</sup> + ( '+A[1]+' - '+B+')<sup>2</sup> + ( '+A[2]+' - '+B+')<sup>2</sup> + ( '+A[3]+' - '+B+')<sup>2</sup> + ( '+A[4]+' - '+B+')<sup>2</sup>)';$('.betta_a')[0].innerHTML='<span><span>&beta;<sub>a</sub></span> = '+la+' / '+ma+' = '+z[0]+'</span>',$('.betta_b')[0].innerHTML='B<sub>\u0431</sub> = '+z[1],$('.betta_c')[0].innerHTML='B<sub>c</sub> = '+z[2],$('.betta_portfolio')[0].innerHTML='B<sub>portf.</sub> = '+z[0]+' * 0,43 + '+z[1]+' * 0,3 + '+z[2]+' * 0,27 = '+z[3];var na='<span>k<sub>t</sub></span> = '+s+' + ('+B+' - '+s+') * '+z[3]+' = '+C+'%';$('.capm')[0].innerHTML=na},error:function(){$('error').addClass('show_error')}})})});